\documentclass[
	oneside,
	paper=a4, 
	ontsize=11pt,
	headings=small]
{scrbook}

%%% packages
\usepackage[american]{babel}
\usepackage{csquotes}
\usepackage{scrlayer-scrpage}
\usepackage[
	left=25mm,
	right=25mm,
	top=25mm, bottom=20mm,
	footskip=10mm]
{geometry}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage[labelfont=bf]{caption}
\usepackage{ifthen}
%\usepackage{showframe}
\usepackage{booktabs}
\usepackage{pgfplotstable}
\usepackage{colortbl}
\usepackage{float}
\usepackage{makecell}
\usepackage[pdfpagelabels]{hyperref}
\usepackage{cleveref}
\usepackage{tikz}
\usepackage{listings}
\usepackage[
    style=numeric,
    backend=biber,
    date=long,
    defernumbers=true,
    sorting=none,
    urldate=long]
{biblatex}

\usetikzlibrary{positioning}
\usetikzlibrary{fit}
\usetikzlibrary{backgrounds}
\usetikzlibrary{shapes}
\usetikzlibrary{matrix}
\usetikzlibrary{calc}
\usetikzlibrary{math}
\usetikzlibrary{arrows.meta}
\input{diagrams/style}


\addbibresource{biblio.bib}
\AtEveryBibitem{%
  \clearfield{eprint}%
  \clearfield{doi}%
}


%%% package configuration
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    urlcolor=blue
}

\newcommand{\highlightbox}[2]{%
  \begingroup%
  \setlength{\fboxsep}{0pt}%
  \colorbox{#1}{\strut\ttfamily#2}%
  \endgroup%
}

\lstset{
    keywords={while, for, if, else, return},
    keywordstyle=\bfseries,
    basicstyle=\ttfamily,
    moredelim=[is][\highlightbox{red!20}]{!}{!},
    columns=fullflexible,
    keepspaces
}

\lstdefinestyle{listingstyle}
{
	captionpos=b,
	xleftmargin=5mm
}

\crefname{lstlisting}{listing}{listings}
\Crefname{lstlisting}{Listing}{Listings}




\pgfplotsset{compat=1.18}

\definecolor{mutedred}{rgb}{1.0, 0.3, 0.3}
\definecolor{mutedgreen}{rgb}{0.3, 1.0, 0.3}

%%% custom commands
\newcommand{\mapvaluetocolor}[1]{%
	\pgfmathsetmacro{\colorvalue}{(1-(#1))*100}%
	\edef\temp{\noexpand\cellcolor{mutedred!\colorvalue!mutedgreen}}%
	\temp
}

\newcommand{\citepage}[2]{\cite[p.~#1]{#2}}

\newcommand{\includediagram}[2]{
    \begin{figure}[H]
    \centering
    
    \begin{tikzpicture}[framed]
    \input{#1}
    \end{tikzpicture}
    
    \caption{#2}
    \label{#1}
    \end{figure}
}

% arguments: table content, label, caption, additional styling options
\newcommand{\includeTable}[4]{
    \begin{table}[H]
        \centering
        \pgfplotstabletypeset[
            string type,
            row sep=crcr,
            col sep=semicolon,
            assign column name/.style={/pgfplots/table/column name={\textbf{##1}}},
            every head row/.style={
                before row=\toprule,
                after row=\midrule,
            },
            every last row/.style={
                after row=\bottomrule
            },
            every column/.style={
                column type={r}
            },%
            #4,
        ]{#1}
        \caption{#3}
        \label{#2}
    \end{table}
}

% arguments: csv file, additional styling options
\newcommand{\includeAccuracyTableCore}[2]{
    \pgfplotstabletypeset[
        string type,
        col sep=comma,
        assign column name/.style={/pgfplots/table/column name={\textbf{##1}}},
        every head row/.style={
            before row=\toprule,
            after row=\midrule,
        },
        every last row/.style={
            after row=\bottomrule
        },
        every column/.style={
            column type={r},
            postproc cell content/.code={%
                \pgfkeyssetvalue{/pgfplots/table/@cell content}{\mapvaluetocolor{####1} ####1}%
            },
        },
        columns/name/.style={
            column name={},
            postproc cell content/.code={}
        },
        #2
    ]{#1}
}

% arguments: csv file, label, caption, additional styling options
\newcommand{\includeAccuracyTable}[4]{
    \begin{table}[H]
        \centering
        \includeAccuracyTableCore{#1}{#4}
        \caption{#3}
        \label{#2}
    \end{table}
}



\newcommand{\ErrorAnalysisTableBegin}
{
	\begin{table}[H]
	\centering
	\begin{tabular}{ll}
	\toprule
	\textbf{Model output} & \textbf{Correct output} \\ \midrule
}

\newcommand{\ErrorAnalysisTableRule}{\midrule}

\newcommand{\ErrorAnalysisTableEnd}[2]
{
	\bottomrule
	\end{tabular}
	\caption{#2}
	\label{#1}
	\end{table}
}


% arguments: pdf file, label, caption
\newcommand{\includePDFPlot}[3]{
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.9]{#1}%
		\caption{#3}
		\label{#2}
	\end{figure}
}

%%% work title and related info

\def\WorkTitle{An Experimental Investigation into Transformer Models Learning Integer Arithmetic}
\def\WorkType{Master Thesis}
\def\WorkAcademicDegree{Dipl.-Ing.}
\def\WorkAuthor{Hugo Platzer}
\def\WorkUniversity{Paris-Lodron-University of Salzburg}
\def\WorkUniversityFaculty{Faculty of Digital and Analytical Sciences}
\def\WorkSupervisor{Ao.Univ.-Prof. Dipl.-Ing. Dr. Helmut Mayer}
\def\WorkSupervisorDepartment{Department of Artificial Intelligence \newline and Human Interfaces}
\def\WorkSubmissionPlace{Salzburg}
\def\WorkSubmissionDate{December 2025}

%%% header/footer config

\pagestyle{scrheadings}
\clearpairofpagestyles
\automark[chapter]{chapter}
\chead{\headmark}
\cfoot*{\pagemark}

%%% document content
\begin{document}

\include{symbols}

\frontmatter

\include{chapters/titlepage}
\include{chapters/abstract}
\tableofcontents

\mainmatter

\include{chapters/introduction}
\include{chapters/transformer_models}
\include{chapters/gpt2_model}
\include{chapters/methods}
\include{chapters/experimental_setup}
\include{chapters/experimental_results}
\include{chapters/discussion}


\backmatter

% Define a custom bibliography heading based on \section*
% It adds the title to the TOC but DOES NOT update the running header
\defbibheading{subbibstatic}{%
	\section*{#1}%
	\addcontentsline{toc}{section}{#1}%
}

\printbibheading[heading=bibintoc, title={Bibliography}]

\defbibfilter{references}{
	type=article or
	type=inproceedings or
	type=incollection
}

\emergencystretch=1em

\printbibliography[filter=references, heading=subbibstatic, title={References}]
\clearpage
\printbibliography[type=misc, heading=subbibstatic, title={Preprints}]
\clearpage
\printbibliography[type=online, heading=subbibstatic, title={Other Links}]

\end{document}